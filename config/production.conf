server {
    listen 80
    host 0.0.0.0
    server_name mywebsite.com
    root www
    index index.html index.htm
    max_body_size 5242880
    autoindex off
    upload_path www/uploads
    cgi_path www/cgi-bin
    
    allow_methods GET POST DELETE
    
    error_page 400 www/error/400.html
    error_page 403 www/error/403.html
    error_page 404 www/error/404.html
    error_page 500 www/error/500.html
    error_page 502 www/error/502.html
    
    cgi_extension .php /usr/bin/php-cgi
    cgi_extension .py /usr/bin/python3
    cgi_extension .sh /bin/bash
    
    location / {
        root www
        index index.html
        allow_methods GET POST
        autoindex off
    }
    
    location /uploads {
        root www/uploads
        allow_methods GET POST DELETE
        upload_path www/uploads
        autoindex on
    }
    
    location /cgi-bin {
        root www/cgi-bin
        allow_methods GET POST
        cgi_path www/cgi-bin
        cgi_extension .php
        cgi_extension .py
        cgi_extension .sh
    }
    
    location /api {
        root www/api
        allow_methods GET POST DELETE
        autoindex off
    }
    
    location /files {
        root www/files
        allow_methods GET
        autoindex on
    }
}

server {
    listen 443
    host 0.0.0.0
    server_name secure.mywebsite.com
    root www
    index index.html
    max_body_size 10485760
    autoindex off
    
    allow_methods GET POST DELETE
    
    error_page 404 www/error/404.html
    error_page 500 www/error/500.html
    
    location /admin {
        redirect 301 /login
    }
    
    location /old-path {
        redirect 302 /new-path
    }
}